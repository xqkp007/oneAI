{"ast":null,"code":"import _toConsumableArray from \"C:/Users/PC/Desktop/zidonghua/project/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport { createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createCommentVNode as _createCommentVNode, normalizeClass as _normalizeClass, withKeys as _withKeys } from \"vue\";\nvar _hoisted_1 = {\n  \"class\": \"chat-window flex flex-col h-screen bg-gray-100\"\n};\nvar _hoisted_2 = {\n  \"class\": \"bg-white p-4 flex items-center shadow-md\"\n};\nvar _hoisted_3 = {\n  \"class\": \"flex-grow overflow-y-auto p-4\"\n};\nvar _hoisted_4 = {\n  key: 0,\n  \"class\": \"text-xs text-gray-500 text-center mb-2\"\n};\nvar _hoisted_5 = {\n  key: 0,\n  \"class\": \"flex items-center mb-2\"\n};\nvar _hoisted_6 = [\"innerHTML\"];\nvar _hoisted_7 = {\n  \"class\": \"bg-white p-4 flex items-center\"\n};\nvar _hoisted_8 = {\n  \"class\": \"p-2\"\n};\nvar _hoisted_9 = {\n  \"class\": \"p-2\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  var _component_v_icon = _resolveComponent(\"v-icon\");\n  var _component_v_text_field = _resolveComponent(\"v-text-field\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"header\", _hoisted_2, [_createElementVNode(\"button\", {\n    onClick: _cache[0] || (_cache[0] = function () {\n      return $options.goBack && $options.goBack.apply($options, arguments);\n    }),\n    \"class\": \"mr-4\"\n  }, [_createVNode(_component_v_icon, null, {\n    \"default\": _withCtx(function () {\n      return _cache[2] || (_cache[2] = [_createTextVNode(\"mdi-arrow-left\")]);\n    }),\n    _: 1 /* STABLE */\n  })]), _cache[4] || (_cache[4] = _createElementVNode(\"h1\", {\n    \"class\": \"text-lg font-semibold flex-grow text-center\"\n  }, \"ÂøÖË¶Å-ËÆ∏ÊÑøÁÆ°ÂÆ∂ ü•£Libra\", -1 /* HOISTED */)), _createElementVNode(\"button\", null, [_createVNode(_component_v_icon, null, {\n    \"default\": _withCtx(function () {\n      return _cache[3] || (_cache[3] = [_createTextVNode(\"mdi-dots-vertical\")]);\n    }),\n    _: 1 /* STABLE */\n  })])]), _createElementVNode(\"main\", _hoisted_3, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.messages, function (message, index) {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: index,\n      \"class\": \"mb-4\"\n    }, [$options.showTimestamp(index) ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, _toDisplayString($options.formatTimestamp(message.timestamp)), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"div\", {\n      \"class\": _normalizeClass(['flex', message.type === 'user' ? 'justify-end' : 'justify-start'])\n    }, [_createElementVNode(\"div\", {\n      \"class\": _normalizeClass(['max-w-3/4 p-3 rounded-lg shadow', message.type === 'user' ? 'bg-blue-500 text-white' : 'bg-white'])\n    }, [message.type !== 'user' ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, _toConsumableArray(_cache[5] || (_cache[5] = [_createElementVNode(\"img\", {\n      src: \"path_to_avatar.jpg\",\n      alt: \"Avatar\",\n      \"class\": \"w-8 h-8 rounded-full mr-2\"\n    }, null, -1 /* HOISTED */), _createElementVNode(\"span\", {\n      \"class\": \"font-semibold\"\n    }, \"ÂøÖË¶Å\", -1 /* HOISTED */)])))) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"div\", {\n      innerHTML: $options.formatMessage(message.content)\n    }, null, 8 /* PROPS */, _hoisted_6)], 2 /* CLASS */)], 2 /* CLASS */)]);\n  }), 128 /* KEYED_FRAGMENT */))]), _createElementVNode(\"footer\", _hoisted_7, [_createVNode(_component_v_text_field, {\n    modelValue: $data.userInput,\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = function ($event) {\n      return $data.userInput = $event;\n    }),\n    placeholder: \"ËØ∑ËæìÂÖ•ÊÇ®ÁöÑÊ∂àÊÅØ...\",\n    \"append-icon\": \"mdi-send\",\n    \"onClick:append\": $options.sendMessage,\n    onKeyup: _withKeys($options.sendMessage, [\"enter\"]),\n    \"hide-details\": \"\",\n    dense: \"\",\n    outlined: \"\",\n    \"class\": \"mr-2 flex-grow\"\n  }, null, 8 /* PROPS */, [\"modelValue\", \"onClick:append\", \"onKeyup\"]), _createElementVNode(\"button\", _hoisted_8, [_createVNode(_component_v_icon, null, {\n    \"default\": _withCtx(function () {\n      return _cache[6] || (_cache[6] = [_createTextVNode(\"mdi-emoticon-outline\")]);\n    }),\n    _: 1 /* STABLE */\n  })]), _createElementVNode(\"button\", _hoisted_9, [_createVNode(_component_v_icon, null, {\n    \"default\": _withCtx(function () {\n      return _cache[7] || (_cache[7] = [_createTextVNode(\"mdi-plus\")]);\n    }),\n    _: 1 /* STABLE */\n  })])])]);\n}","map":{"version":3,"names":["key","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","onClick","_cache","$options","goBack","apply","arguments","_createVNode","_component_v_icon","_withCtx","_createTextVNode","_","_hoisted_3","_Fragment","_renderList","$data","messages","message","index","showTimestamp","_hoisted_4","_toDisplayString","formatTimestamp","timestamp","_createCommentVNode","_normalizeClass","type","_hoisted_5","_toConsumableArray","src","alt","innerHTML","formatMessage","content","_hoisted_6","_hoisted_7","_component_v_text_field","modelValue","userInput","$event","placeholder","sendMessage","onKeyup","_withKeys","dense","outlined","_hoisted_8","_hoisted_9"],"sources":["C:\\Users\\PC\\Desktop\\zidonghua\\project\\frontend\\src\\components\\ChatWindow.vue"],"sourcesContent":["<template>\r\n  <div class=\"chat-window flex flex-col h-screen bg-gray-100\">\r\n    <header class=\"bg-white p-4 flex items-center shadow-md\">\r\n      <button @click=\"goBack\" class=\"mr-4\">\r\n        <v-icon>mdi-arrow-left</v-icon>\r\n      </button>\r\n      <h1 class=\"text-lg font-semibold flex-grow text-center\">ÂøÖË¶Å-ËÆ∏ÊÑøÁÆ°ÂÆ∂ ü•£Libra</h1>\r\n      <button>\r\n        <v-icon>mdi-dots-vertical</v-icon>\r\n      </button>\r\n    </header>\r\n\r\n    <main class=\"flex-grow overflow-y-auto p-4\">\r\n      <div v-for=\"(message, index) in messages\" :key=\"index\" class=\"mb-4\">\r\n        <div v-if=\"showTimestamp(index)\" class=\"text-xs text-gray-500 text-center mb-2\">\r\n          {{ formatTimestamp(message.timestamp) }}\r\n        </div>\r\n        <div :class=\"['flex', message.type === 'user' ? 'justify-end' : 'justify-start']\">\r\n          <div :class=\"['max-w-3/4 p-3 rounded-lg shadow', \r\n            message.type === 'user' ? 'bg-blue-500 text-white' : 'bg-white']\">\r\n            <div v-if=\"message.type !== 'user'\" class=\"flex items-center mb-2\">\r\n              <img src=\"path_to_avatar.jpg\" alt=\"Avatar\" class=\"w-8 h-8 rounded-full mr-2\">\r\n              <span class=\"font-semibold\">ÂøÖË¶Å</span>\r\n            </div>\r\n            <div v-html=\"formatMessage(message.content)\"></div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </main>\r\n\r\n    <footer class=\"bg-white p-4 flex items-center\">\r\n      <v-text-field\r\n        v-model=\"userInput\"\r\n        placeholder=\"ËØ∑ËæìÂÖ•ÊÇ®ÁöÑÊ∂àÊÅØ...\"\r\n        append-icon=\"mdi-send\"\r\n        @click:append=\"sendMessage\"\r\n        @keyup.enter=\"sendMessage\"\r\n        hide-details\r\n        dense\r\n        outlined\r\n        class=\"mr-2 flex-grow\"\r\n      ></v-text-field>\r\n      <button class=\"p-2\">\r\n        <v-icon>mdi-emoticon-outline</v-icon>\r\n      </button>\r\n      <button class=\"p-2\">\r\n        <v-icon>mdi-plus</v-icon>\r\n      </button>\r\n    </footer>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\n\r\nexport default {\r\n  name: 'ChatWindow',\r\n  data() {\r\n    return {\r\n      messages: [],\r\n      userInput: ''\r\n    }\r\n  },\r\n  methods: {\r\n    async sendMessage() {\r\n      if (this.userInput.trim() === '') return\r\n\r\n      const timestamp = new Date()\r\n      this.messages.push({ type: 'user', content: this.userInput, timestamp })\r\n\r\n      try {\r\n        const response = await axios.post('http://localhost:5000/chat', { message: this.userInput })\r\n        this.messages.push({ type: 'ai', content: response.data.reply, timestamp: new Date() })\r\n      } catch (error) {\r\n        console.error('Error:', error)\r\n        this.messages.push({ type: 'error', content: 'Êä±Ê≠â,Âá∫Áé∞‰∫Ü‰∏Ä‰∏™ÈîôËØØ„ÄÇ', timestamp: new Date() })\r\n      }\r\n\r\n      this.userInput = ''\r\n    },\r\n    goBack() {\r\n      // ÂÆûÁé∞ËøîÂõûÈÄªËæë\r\n    },\r\n    showTimestamp(index) {\r\n      if (index === 0) return true\r\n      const prevMessage = this.messages[index - 1]\r\n      const currentMessage = this.messages[index]\r\n      return new Date(currentMessage.timestamp) - new Date(prevMessage.timestamp) > 300000 // 5ÂàÜÈíü\r\n    },\r\n    formatTimestamp(timestamp) {\r\n      const date = new Date(timestamp)\r\n      return `${date.getMonth() + 1}Êúà${date.getDate()}Êó• ${date.getHours().toString().padStart(2, '0')}:${date.getMinutes().toString().padStart(2, '0')}`\r\n    },\r\n    formatMessage(content) {\r\n      // ËøôÈáåÂèØ‰ª•Ê∑ªÂä†Êõ¥Â§öÁöÑÊ†ºÂºèÂåñÈÄªËæëÔºåÊØîÂ¶ÇÂ§ÑÁêÜÈìæÊé•„ÄÅË°®ÊÉÖÁ≠â\r\n      return content.replace(/\\n/g, '<br>')\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n/* ÂèØ‰ª•Ê∑ªÂä†‰∏Ä‰∫õËá™ÂÆö‰πâÊ†∑Âºè */\r\n</style>"],"mappings":";;;EACO,SAAM;AAAgD;;EACjD,SAAM;AAA0C;;EAUlD,SAAM;AAA+B;;EAZ/CA,GAAA;EAcyC,SAAM;;;EAd/CA,GAAA;EAoBgD,SAAM;;iBApBtD;;EA8BY,SAAM;AAAgC;;EAYpC,SAAM;AAAK;;EAGX,SAAM;AAAK;;;;uBA5CvBC,mBAAA,CAgDM,OAhDNC,UAgDM,GA/CJC,mBAAA,CAQS,UARTC,UAQS,GAPPD,mBAAA,CAES;IAFAE,OAAK,EAAAC,MAAA,QAAAA,MAAA;MAAA,OAAEC,QAAA,CAAAC,MAAA,IAAAD,QAAA,CAAAC,MAAA,CAAAC,KAAA,CAAAF,QAAA,EAAAG,SAAA,CAAM;IAAA;IAAE,SAAM;MAC5BC,YAAA,CAA+BC,iBAAA;IAJvC,WAAAC,QAAA,CAIgB;MAAA,OAAcP,MAAA,QAAAA,MAAA,OAJ9BQ,gBAAA,CAIgB,gBAAc,E;;IAJ9BC,CAAA;kCAMMZ,mBAAA,CAA4E;IAAxE,SAAM;EAA6C,GAAC,iBAAe,sBACvEA,mBAAA,CAES,iBADPQ,YAAA,CAAkCC,iBAAA;IAR1C,WAAAC,QAAA,CAQgB;MAAA,OAAiBP,MAAA,QAAAA,MAAA,OARjCQ,gBAAA,CAQgB,mBAAiB,E;;IARjCC,CAAA;UAYIZ,mBAAA,CAgBO,QAhBPa,UAgBO,I,kBAfLf,mBAAA,CAcMgB,SAAA,QA3BZC,WAAA,CAasCC,KAAA,CAAAC,QAAQ,EAb9C,UAamBC,OAAO,EAAEC,KAAK;yBAA3BrB,mBAAA,CAcM;MAdqCD,GAAG,EAAEsB,KAAK;MAAE,SAAM;QAChDf,QAAA,CAAAgB,aAAa,CAACD,KAAK,K,cAA9BrB,mBAAA,CAEM,OAFNuB,UAEM,EAAAC,gBAAA,CADDlB,QAAA,CAAAmB,eAAe,CAACL,OAAO,CAACM,SAAS,qBAf9CC,mBAAA,gBAiBQzB,mBAAA,CASM;MATA,SAjBd0B,eAAA,UAiB8BR,OAAO,CAACS,IAAI;QAChC3B,mBAAA,CAOM;MAPA,SAlBhB0B,eAAA,qCAkByER,OAAO,CAACS,IAAI;QAE9DT,OAAO,CAACS,IAAI,e,cAAvB7B,mBAAA,CAGM,OAHN8B,UAGM,EAAAC,kBAAA,CAAA1B,MAAA,QAAAA,MAAA,OAFJH,mBAAA,CAA6E;MAAxE8B,GAAG,EAAC,oBAAoB;MAACC,GAAG,EAAC,QAAQ;MAAC,SAAM;gCACjD/B,mBAAA,CAAqC;MAA/B,SAAM;IAAe,GAAC,IAAE,oB,OAtB5CyB,mBAAA,gBAwBYzB,mBAAA,CAAmD;MAA9CgC,SAAuC,EAA/B5B,QAAA,CAAA6B,aAAa,CAACf,OAAO,CAACgB,OAAO;4BAxBtDC,UAAA,E;oCA8BInC,mBAAA,CAkBS,UAlBToC,UAkBS,GAjBP5B,YAAA,CAUgB6B,uBAAA;IAzCtBC,UAAA,EAgCiBtB,KAAA,CAAAuB,SAAS;IAhC1B,uBAAApC,MAAA,QAAAA,MAAA,gBAAAqC,MAAA;MAAA,OAgCiBxB,KAAA,CAAAuB,SAAS,GAAAC,MAAA;IAAA;IAClBC,WAAW,EAAC,YAAY;IACxB,aAAW,EAAC,UAAU;IACrB,gBAAY,EAAErC,QAAA,CAAAsC,WAAW;IACzBC,OAAK,EApCdC,SAAA,CAoCsBxC,QAAA,CAAAsC,WAAW;IACzB,cAAY,EAAZ,EAAY;IACZG,KAAK,EAAL,EAAK;IACLC,QAAQ,EAAR,EAAQ;IACR,SAAM;wEAER9C,mBAAA,CAES,UAFT+C,UAES,GADPvC,YAAA,CAAqCC,iBAAA;IA3C7C,WAAAC,QAAA,CA2CgB;MAAA,OAAoBP,MAAA,QAAAA,MAAA,OA3CpCQ,gBAAA,CA2CgB,sBAAoB,E;;IA3CpCC,CAAA;QA6CMZ,mBAAA,CAES,UAFTgD,UAES,GADPxC,YAAA,CAAyBC,iBAAA;IA9CjC,WAAAC,QAAA,CA8CgB;MAAA,OAAQP,MAAA,QAAAA,MAAA,OA9CxBQ,gBAAA,CA8CgB,UAAQ,E;;IA9CxBC,CAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}