{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/PC/Desktop/zidonghua/project/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/PC/Desktop/zidonghua/project/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.error.to-string.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.date.to-string.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.regexp.to-string.js\";\nimport \"core-js/modules/es.string.pad-start.js\";\nimport \"core-js/modules/es.string.replace.js\";\nimport \"core-js/modules/es.string.trim.js\";\nimport axios from 'axios';\nexport default {\n  name: 'ChatWindow',\n  data: function data() {\n    return {\n      messages: [],\n      userInput: '',\n      isAiThinking: false\n    };\n  },\n  methods: {\n    sendMessage: function sendMessage() {\n      var _this = this;\n      return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var timestamp, userInput, response;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              if (!(_this.userInput.trim() === '' || _this.isAiThinking)) {\n                _context.next = 2;\n                break;\n              }\n              return _context.abrupt(\"return\");\n            case 2:\n              timestamp = new Date();\n              _this.messages.push({\n                type: 'user',\n                content: _this.userInput,\n                timestamp: timestamp\n              });\n              _this.isAiThinking = true;\n              userInput = _this.userInput;\n              _this.userInput = '';\n              _context.prev = 7;\n              _context.next = 10;\n              return axios.post('http://localhost:5000/chat', {\n                message: userInput\n              });\n            case 10:\n              response = _context.sent;\n              _this.messages.push({\n                type: 'ai',\n                content: response.data.reply,\n                timestamp: new Date()\n              });\n              _context.next = 18;\n              break;\n            case 14:\n              _context.prev = 14;\n              _context.t0 = _context[\"catch\"](7);\n              console.error('Error:', _context.t0);\n              _this.messages.push({\n                type: 'error',\n                content: 'Êä±Ê≠â,Âá∫Áé∞‰∫Ü‰∏Ä‰∏™ÈîôËØØ„ÄÇ',\n                timestamp: new Date()\n              });\n            case 18:\n              _context.prev = 18;\n              _this.isAiThinking = false;\n              return _context.finish(18);\n            case 21:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, null, [[7, 14, 18, 21]]);\n      }))();\n    },\n    goBack: function goBack() {\n      // ÂÆûÁé∞ËøîÂõûÈÄªËæë\n    },\n    showTimestamp: function showTimestamp(index) {\n      if (index === 0) return true;\n      var prevMessage = this.messages[index - 1];\n      var currentMessage = this.messages[index];\n      return new Date(currentMessage.timestamp) - new Date(prevMessage.timestamp) > 300000; // 5ÂàÜÈíü\n    },\n    formatTimestamp: function formatTimestamp(timestamp) {\n      var date = new Date(timestamp);\n      return \"\".concat(date.getMonth() + 1, \"\\u6708\").concat(date.getDate(), \"\\u65E5 \").concat(date.getHours().toString().padStart(2, '0'), \":\").concat(date.getMinutes().toString().padStart(2, '0'));\n    },\n    formatMessage: function formatMessage(content) {\n      return content.replace(/\\n/g, '<br>');\n    }\n  }\n};","map":{"version":3,"names":["axios","name","data","messages","userInput","isAiThinking","methods","sendMessage","_this","_asyncToGenerator","_regeneratorRuntime","mark","_callee","timestamp","response","wrap","_callee$","_context","prev","next","trim","abrupt","Date","push","type","content","post","message","sent","reply","t0","console","error","finish","stop","goBack","showTimestamp","index","prevMessage","currentMessage","formatTimestamp","date","concat","getMonth","getDate","getHours","toString","padStart","getMinutes","formatMessage","replace"],"sources":["C:\\Users\\PC\\Desktop\\zidonghua\\project\\frontend\\src\\components\\ChatWindow.vue"],"sourcesContent":["<template>\r\n  <div class=\"chat-window flex flex-col h-screen bg-gray-100\">\r\n    <header class=\"bg-white p-4 flex items-center shadow-md\">\r\n      <v-icon @click=\"goBack\">mdi-arrow-left</v-icon>\r\n      <h1 class=\"text-lg font-semibold flex-grow text-center\">ÂøÖË¶Å-ËÆ∏ÊÑøÁÆ°ÂÆ∂ ü•£Libra</h1>\r\n      <v-icon>mdi-dots-vertical</v-icon>\r\n    </header>\r\n\r\n    <main class=\"flex-grow overflow-y-auto p-4\">\r\n      <div v-for=\"(message, index) in messages\" :key=\"index\" class=\"mb-4\">\r\n        <div v-if=\"showTimestamp(index)\" class=\"text-xs text-gray-500 text-center mb-2\">\r\n          {{ formatTimestamp(message.timestamp) }}\r\n        </div>\r\n        <div :class=\"['flex', message.type === 'user' ? 'justify-end' : 'justify-start']\">\r\n          <div :class=\"['max-w-3/4 p-3 rounded-lg shadow', \r\n            message.type === 'user' ? 'bg-blue-500 text-white' : 'bg-white text-gray-800']\">\r\n            <div v-html=\"formatMessage(message.content)\"></div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div v-if=\"isAiThinking\" class=\"flex justify-start mb-4\">\r\n        <div class=\"bg-white text-gray-800 p-3 rounded-lg shadow\">\r\n          <div class=\"flex items-center\">\r\n            <span class=\"mr-2\">AIÊ≠£Âú®ÊÄùËÄÉ</span>\r\n            <div class=\"loading-dots\">\r\n              <span></span>\r\n              <span></span>\r\n              <span></span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </main>\r\n\r\n    <footer class=\"bg-white p-4 shadow-md\">\r\n      <div class=\"max-w-3xl mx-auto flex items-center\">\r\n        <input\r\n          v-model=\"userInput\"\r\n          type=\"text\"\r\n          placeholder=\"ËØ∑ËæìÂÖ•ÊÇ®ÁöÑÊ∂àÊÅØ...\"\r\n          class=\"flex-grow p-2 border rounded-l-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n          @keyup.enter=\"sendMessage\"\r\n          :disabled=\"isAiThinking\"\r\n        />\r\n        <button\r\n          @click=\"sendMessage\"\r\n          class=\"bg-blue-500 text-white p-2 rounded-r-lg hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n          :disabled=\"isAiThinking\"\r\n        >\r\n          ÂèëÈÄÅ\r\n        </button>\r\n      </div>\r\n    </footer>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\n\r\nexport default {\r\n  name: 'ChatWindow',\r\n  data() {\r\n    return {\r\n      messages: [],\r\n      userInput: '',\r\n      isAiThinking: false\r\n    }\r\n  },\r\n  methods: {\r\n    async sendMessage() {\r\n      if (this.userInput.trim() === '' || this.isAiThinking) return\r\n\r\n      const timestamp = new Date()\r\n      this.messages.push({ type: 'user', content: this.userInput, timestamp })\r\n      this.isAiThinking = true\r\n      const userInput = this.userInput\r\n      this.userInput = ''\r\n\r\n      try {\r\n        const response = await axios.post('http://localhost:5000/chat', { message: userInput })\r\n        this.messages.push({ type: 'ai', content: response.data.reply, timestamp: new Date() })\r\n      } catch (error) {\r\n        console.error('Error:', error)\r\n        this.messages.push({ type: 'error', content: 'Êä±Ê≠â,Âá∫Áé∞‰∫Ü‰∏Ä‰∏™ÈîôËØØ„ÄÇ', timestamp: new Date() })\r\n      } finally {\r\n        this.isAiThinking = false\r\n      }\r\n    },\r\n    goBack() {\r\n      // ÂÆûÁé∞ËøîÂõûÈÄªËæë\r\n    },\r\n    showTimestamp(index) {\r\n      if (index === 0) return true\r\n      const prevMessage = this.messages[index - 1]\r\n      const currentMessage = this.messages[index]\r\n      return new Date(currentMessage.timestamp) - new Date(prevMessage.timestamp) > 300000 // 5ÂàÜÈíü\r\n    },\r\n    formatTimestamp(timestamp) {\r\n      const date = new Date(timestamp)\r\n      return `${date.getMonth() + 1}Êúà${date.getDate()}Êó• ${date.getHours().toString().padStart(2, '0')}:${date.getMinutes().toString().padStart(2, '0')}`\r\n    },\r\n    formatMessage(content) {\r\n      return content.replace(/\\n/g, '<br>')\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.chat-window {\r\n  max-width: 768px;\r\n  margin: 0 auto;\r\n  height: 100vh;\r\n}\r\n\r\n.loading-dots span {\r\n  display: inline-block;\r\n  width: 8px;\r\n  height: 8px;\r\n  border-radius: 50%;\r\n  background-color: #888;\r\n  margin: 0 2px;\r\n  animation: loading 1.4s infinite ease-in-out both;\r\n}\r\n\r\n.loading-dots span:nth-child(1) {\r\n  animation-delay: -0.32s;\r\n}\r\n\r\n.loading-dots span:nth-child(2) {\r\n  animation-delay: -0.16s;\r\n}\r\n\r\n@keyframes loading {\r\n  0%, 80%, 100% { \r\n    transform: scale(0);\r\n  } 40% { \r\n    transform: scale(1.0);\r\n  }\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}