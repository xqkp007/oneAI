{"ast":null,"code":"import { createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createCommentVNode as _createCommentVNode, normalizeClass as _normalizeClass, createElementVNode as _createElementVNode, withKeys as _withKeys, createBlock as _createBlock } from \"vue\";\nvar _hoisted_1 = {\n  key: 0,\n  \"class\": \"text-xs text-gray-500 text-center mb-1\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  var _component_v_icon = _resolveComponent(\"v-icon\");\n  var _component_v_app_bar_nav_icon = _resolveComponent(\"v-app-bar-nav-icon\");\n  var _component_v_toolbar_title = _resolveComponent(\"v-toolbar-title\");\n  var _component_v_spacer = _resolveComponent(\"v-spacer\");\n  var _component_v_btn = _resolveComponent(\"v-btn\");\n  var _component_v_app_bar = _resolveComponent(\"v-app-bar\");\n  var _component_v_main = _resolveComponent(\"v-main\");\n  var _component_v_text_field = _resolveComponent(\"v-text-field\");\n  var _component_v_footer = _resolveComponent(\"v-footer\");\n  var _component_v_container = _resolveComponent(\"v-container\");\n  return _openBlock(), _createBlock(_component_v_container, {\n    \"class\": \"chat-window bg-gray-100 h-screen flex flex-col\"\n  }, {\n    \"default\": _withCtx(function () {\n      return [_createVNode(_component_v_app_bar, {\n        \"class\": \"bg-white\"\n      }, {\n        \"default\": _withCtx(function () {\n          return [_createVNode(_component_v_app_bar_nav_icon, {\n            onClick: $options.goBack\n          }, {\n            \"default\": _withCtx(function () {\n              return [_createVNode(_component_v_icon, null, {\n                \"default\": _withCtx(function () {\n                  return _cache[1] || (_cache[1] = [_createTextVNode(\"mdi-arrow-left\")]);\n                }),\n                _: 1 /* STABLE */\n              })];\n            }),\n            _: 1 /* STABLE */\n          }, 8 /* PROPS */, [\"onClick\"]), _createVNode(_component_v_toolbar_title, null, {\n            \"default\": _withCtx(function () {\n              return _cache[2] || (_cache[2] = [_createTextVNode(\"ÂøÖË¶Å-ËÆ∏ÊÑøÁÆ°ÂÆ∂ ü•£Libra\")]);\n            }),\n            _: 1 /* STABLE */\n          }), _createVNode(_component_v_spacer), _createVNode(_component_v_btn, {\n            icon: \"\"\n          }, {\n            \"default\": _withCtx(function () {\n              return [_createVNode(_component_v_icon, null, {\n                \"default\": _withCtx(function () {\n                  return _cache[3] || (_cache[3] = [_createTextVNode(\"mdi-dots-vertical\")]);\n                }),\n                _: 1 /* STABLE */\n              })];\n            }),\n            _: 1 /* STABLE */\n          })];\n        }),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_v_main, {\n        \"class\": \"flex-grow overflow-y-auto px-4 py-2\"\n      }, {\n        \"default\": _withCtx(function () {\n          return [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.messages, function (message, index) {\n            return _openBlock(), _createElementBlock(\"div\", {\n              key: index,\n              \"class\": \"mb-4\"\n            }, [$options.showTimestamp(index) ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, _toDisplayString($options.formatTimestamp(message.timestamp)), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"div\", {\n              \"class\": _normalizeClass(['flex', message.type === 'user' ? 'justify-end' : 'justify-start'])\n            }, [_createElementVNode(\"div\", {\n              \"class\": _normalizeClass(['max-w-3/4 p-3 rounded-lg', message.type === 'user' ? 'bg-blue-500 text-white' : 'bg-white'])\n            }, _toDisplayString(message.content), 3 /* TEXT, CLASS */)], 2 /* CLASS */)]);\n          }), 128 /* KEYED_FRAGMENT */))];\n        }),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_v_footer, {\n        \"class\": \"bg-white\"\n      }, {\n        \"default\": _withCtx(function () {\n          return [_createVNode(_component_v_text_field, {\n            modelValue: $data.userInput,\n            \"onUpdate:modelValue\": _cache[0] || (_cache[0] = function ($event) {\n              return $data.userInput = $event;\n            }),\n            placeholder: \"ËØ∑ËæìÂÖ•ÊÇ®ÁöÑÊ∂àÊÅØ...\",\n            \"append-icon\": \"mdi-send\",\n            \"onClick:append\": $options.sendMessage,\n            onKeyup: _withKeys($options.sendMessage, [\"enter\"]),\n            \"hide-details\": \"\",\n            dense: \"\",\n            outlined: \"\",\n            \"class\": \"mr-2\"\n          }, null, 8 /* PROPS */, [\"modelValue\", \"onClick:append\", \"onKeyup\"]), _createVNode(_component_v_btn, {\n            icon: \"\"\n          }, {\n            \"default\": _withCtx(function () {\n              return [_createVNode(_component_v_icon, null, {\n                \"default\": _withCtx(function () {\n                  return _cache[4] || (_cache[4] = [_createTextVNode(\"mdi-emoticon-outline\")]);\n                }),\n                _: 1 /* STABLE */\n              })];\n            }),\n            _: 1 /* STABLE */\n          }), _createVNode(_component_v_btn, {\n            icon: \"\"\n          }, {\n            \"default\": _withCtx(function () {\n              return [_createVNode(_component_v_icon, null, {\n                \"default\": _withCtx(function () {\n                  return _cache[5] || (_cache[5] = [_createTextVNode(\"mdi-plus\")]);\n                }),\n                _: 1 /* STABLE */\n              })];\n            }),\n            _: 1 /* STABLE */\n          })];\n        }),\n        _: 1 /* STABLE */\n      })];\n    }),\n    _: 1 /* STABLE */\n  });\n}","map":{"version":3,"names":["key","_createBlock","_component_v_container","_withCtx","_createVNode","_component_v_app_bar","_component_v_app_bar_nav_icon","onClick","$options","goBack","_component_v_icon","_cache","_createTextVNode","_","_component_v_toolbar_title","_component_v_spacer","_component_v_btn","icon","_component_v_main","_createElementBlock","_Fragment","_renderList","$data","messages","message","index","showTimestamp","_hoisted_1","_toDisplayString","formatTimestamp","timestamp","_createCommentVNode","_createElementVNode","_normalizeClass","type","content","_component_v_footer","_component_v_text_field","modelValue","userInput","$event","placeholder","sendMessage","onKeyup","_withKeys","dense","outlined"],"sources":["C:\\Users\\PC\\Desktop\\zidonghua\\project\\frontend\\src\\components\\ChatWindow.vue"],"sourcesContent":["<template>\r\n  <v-container class=\"chat-window bg-gray-100 h-screen flex flex-col\">\r\n    <v-app-bar class=\"bg-white\">\r\n      <v-app-bar-nav-icon @click=\"goBack\">\r\n        <v-icon>mdi-arrow-left</v-icon>\r\n      </v-app-bar-nav-icon>\r\n      <v-toolbar-title>ÂøÖË¶Å-ËÆ∏ÊÑøÁÆ°ÂÆ∂ ü•£Libra</v-toolbar-title>\r\n      <v-spacer></v-spacer>\r\n      <v-btn icon>\r\n        <v-icon>mdi-dots-vertical</v-icon>\r\n      </v-btn>\r\n    </v-app-bar>\r\n\r\n    <v-main class=\"flex-grow overflow-y-auto px-4 py-2\">\r\n      <div v-for=\"(message, index) in messages\" :key=\"index\" class=\"mb-4\">\r\n        <div class=\"text-xs text-gray-500 text-center mb-1\" v-if=\"showTimestamp(index)\">\r\n          {{ formatTimestamp(message.timestamp) }}\r\n        </div>\r\n        <div :class=\"['flex', message.type === 'user' ? 'justify-end' : 'justify-start']\">\r\n          <div :class=\"['max-w-3/4 p-3 rounded-lg', \r\n            message.type === 'user' ? 'bg-blue-500 text-white' : 'bg-white']\">\r\n            {{ message.content }}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </v-main>\r\n\r\n    <v-footer class=\"bg-white\">\r\n      <v-text-field\r\n        v-model=\"userInput\"\r\n        placeholder=\"ËØ∑ËæìÂÖ•ÊÇ®ÁöÑÊ∂àÊÅØ...\"\r\n        append-icon=\"mdi-send\"\r\n        @click:append=\"sendMessage\"\r\n        @keyup.enter=\"sendMessage\"\r\n        hide-details\r\n        dense\r\n        outlined\r\n        class=\"mr-2\"\r\n      ></v-text-field>\r\n      <v-btn icon>\r\n        <v-icon>mdi-emoticon-outline</v-icon>\r\n      </v-btn>\r\n      <v-btn icon>\r\n        <v-icon>mdi-plus</v-icon>\r\n      </v-btn>\r\n    </v-footer>\r\n  </v-container>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\n\r\nexport default {\r\n  name: 'ChatWindow',\r\n  data() {\r\n    return {\r\n      messages: [],\r\n      userInput: ''\r\n    }\r\n  },\r\n  methods: {\r\n    async sendMessage() {\r\n      if (this.userInput.trim() === '') return\r\n\r\n      const timestamp = new Date()\r\n      this.messages.push({ type: 'user', content: this.userInput, timestamp })\r\n\r\n      try {\r\n        const response = await axios.post('http://localhost:5000/chat', { message: this.userInput })\r\n        this.messages.push({ type: 'ai', content: response.data.reply, timestamp: new Date() })\r\n      } catch (error) {\r\n        console.error('Error:', error)\r\n        this.messages.push({ type: 'error', content: 'Êä±Ê≠â,Âá∫Áé∞‰∫Ü‰∏Ä‰∏™ÈîôËØØ„ÄÇ', timestamp: new Date() })\r\n      }\r\n\r\n      this.userInput = ''\r\n    },\r\n    goBack() {\r\n      // ÂÆûÁé∞ËøîÂõûÈÄªËæë\r\n    },\r\n    showTimestamp(index) {\r\n      if (index === 0) return true\r\n      const prevMessage = this.messages[index - 1]\r\n      const currentMessage = this.messages[index]\r\n      return new Date(currentMessage.timestamp) - new Date(prevMessage.timestamp) > 300000 // 5ÂàÜÈíü\r\n    },\r\n    formatTimestamp(timestamp) {\r\n      const date = new Date(timestamp)\r\n      return `${date.getMonth() + 1}Êúà${date.getDate()}Êó• ${date.getHours().toString().padStart(2, '0')}:${date.getMinutes().toString().padStart(2, '0')}`\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.chat-window {\r\n  width: 400px;\r\n  margin: 0 auto;\r\n  border: 1px solid #ccc;\r\n  border-radius: 5px;\r\n}\r\n\r\n.messages {\r\n  height: 300px;\r\n  overflow-y: auto;\r\n  padding: 10px;\r\n}\r\n\r\n.user, .ai, .error {\r\n  margin-bottom: 10px;\r\n  padding: 5px;\r\n  border-radius: 5px;\r\n}\r\n\r\n.user {\r\n  background-color: #e6f3ff;\r\n  text-align: right;\r\n}\r\n\r\n.ai {\r\n  background-color: #f0f0f0;\r\n  text-align: left;\r\n}\r\n\r\n.error {\r\n  background-color: #ffe6e6;\r\n  text-align: center;\r\n}\r\n\r\n.input-area {\r\n  display: flex;\r\n  padding: 10px;\r\n}\r\n\r\ninput {\r\n  flex-grow: 1;\r\n  padding: 5px;\r\n}\r\n\r\nbutton {\r\n  margin-left: 10px;\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}