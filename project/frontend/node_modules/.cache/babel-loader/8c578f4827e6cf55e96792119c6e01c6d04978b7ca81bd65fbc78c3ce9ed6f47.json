{"ast":null,"code":"import { createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createCommentVNode as _createCommentVNode, normalizeClass as _normalizeClass, vModelText as _vModelText, withKeys as _withKeys, withDirectives as _withDirectives } from \"vue\";\nvar _hoisted_1 = {\n  \"class\": \"chat-window flex flex-col h-screen bg-gray-100\"\n};\nvar _hoisted_2 = {\n  \"class\": \"bg-white p-4 flex items-center shadow-md\"\n};\nvar _hoisted_3 = {\n  \"class\": \"flex-grow overflow-y-auto p-4\"\n};\nvar _hoisted_4 = {\n  key: 0,\n  \"class\": \"text-xs text-gray-500 text-center mb-2\"\n};\nvar _hoisted_5 = [\"innerHTML\"];\nvar _hoisted_6 = {\n  key: 0,\n  \"class\": \"flex justify-start mb-4\"\n};\nvar _hoisted_7 = {\n  \"class\": \"bg-white p-4 shadow-md\"\n};\nvar _hoisted_8 = {\n  \"class\": \"max-w-3xl mx-auto flex items-center\"\n};\nvar _hoisted_9 = [\"disabled\"];\nvar _hoisted_10 = [\"disabled\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  var _component_v_icon = _resolveComponent(\"v-icon\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"header\", _hoisted_2, [_createVNode(_component_v_icon, {\n    onClick: $options.goBack\n  }, {\n    \"default\": _withCtx(function () {\n      return _cache[3] || (_cache[3] = [_createTextVNode(\"mdi-arrow-left\")]);\n    }),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"onClick\"]), _cache[5] || (_cache[5] = _createElementVNode(\"h1\", {\n    \"class\": \"text-lg font-semibold flex-grow text-center\"\n  }, \"ÂøÖË¶Å-ËÆ∏ÊÑøÁÆ°ÂÆ∂ ü•£Libra\", -1 /* HOISTED */)), _createVNode(_component_v_icon, null, {\n    \"default\": _withCtx(function () {\n      return _cache[4] || (_cache[4] = [_createTextVNode(\"mdi-dots-vertical\")]);\n    }),\n    _: 1 /* STABLE */\n  })]), _createElementVNode(\"main\", _hoisted_3, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.messages, function (message, index) {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: index,\n      \"class\": \"mb-4\"\n    }, [$options.showTimestamp(index) ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, _toDisplayString($options.formatTimestamp(message.timestamp)), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"div\", {\n      \"class\": _normalizeClass(['flex', message.type === 'user' ? 'justify-end' : 'justify-start'])\n    }, [_createElementVNode(\"div\", {\n      \"class\": _normalizeClass(['max-w-3/4 p-3 rounded-lg shadow', message.type === 'user' ? 'bg-blue-500 text-white' : 'bg-white text-gray-800'])\n    }, [_createElementVNode(\"div\", {\n      innerHTML: $options.formatMessage(message.content)\n    }, null, 8 /* PROPS */, _hoisted_5)], 2 /* CLASS */)], 2 /* CLASS */)]);\n  }), 128 /* KEYED_FRAGMENT */)), $data.isAiThinking ? (_openBlock(), _createElementBlock(\"div\", _hoisted_6, _cache[6] || (_cache[6] = [_createElementVNode(\"div\", {\n    \"class\": \"bg-white text-gray-800 p-3 rounded-lg shadow\"\n  }, [_createElementVNode(\"div\", {\n    \"class\": \"flex items-center\"\n  }, [_createElementVNode(\"span\", {\n    \"class\": \"mr-2\"\n  }, \"AIÊ≠£Âú®ÊÄùËÄÉ\"), _createElementVNode(\"div\", {\n    \"class\": \"loading-dots\"\n  }, [_createElementVNode(\"span\"), _createElementVNode(\"span\"), _createElementVNode(\"span\")])])], -1 /* HOISTED */)]))) : _createCommentVNode(\"v-if\", true)]), _createElementVNode(\"footer\", _hoisted_7, [_createElementVNode(\"div\", _hoisted_8, [_withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = function ($event) {\n      return $data.userInput = $event;\n    }),\n    type: \"text\",\n    placeholder: \"ËØ∑ËæìÂÖ•ÊÇ®ÁöÑÊ∂àÊÅØ...\",\n    \"class\": \"flex-grow p-2 border rounded-l-lg focus:outline-none focus:ring-2 focus:ring-blue-500\",\n    onKeyup: _cache[1] || (_cache[1] = _withKeys(function () {\n      return $options.sendMessage && $options.sendMessage.apply($options, arguments);\n    }, [\"enter\"])),\n    disabled: $data.isAiThinking\n  }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_9), [[_vModelText, $data.userInput]]), _createElementVNode(\"button\", {\n    onClick: _cache[2] || (_cache[2] = function () {\n      return $options.sendMessage && $options.sendMessage.apply($options, arguments);\n    }),\n    \"class\": \"bg-blue-500 text-white p-2 rounded-r-lg hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500\",\n    disabled: $data.isAiThinking\n  }, \" ÂèëÈÄÅ \", 8 /* PROPS */, _hoisted_10)])])]);\n}","map":{"version":3,"names":["key","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_createVNode","_component_v_icon","onClick","$options","goBack","_withCtx","_cache","_createTextVNode","_","_hoisted_3","_Fragment","_renderList","$data","messages","message","index","showTimestamp","_hoisted_4","_toDisplayString","formatTimestamp","timestamp","_createCommentVNode","_normalizeClass","type","innerHTML","formatMessage","content","_hoisted_5","isAiThinking","_hoisted_6","_hoisted_7","_hoisted_8","$event","userInput","placeholder","onKeyup","_withKeys","sendMessage","apply","arguments","disabled","_hoisted_9","_hoisted_10"],"sources":["C:\\Users\\PC\\Desktop\\zidonghua\\project\\frontend\\src\\components\\ChatWindow.vue"],"sourcesContent":["<template>\r\n  <div class=\"chat-window flex flex-col h-screen bg-gray-100\">\r\n    <header class=\"bg-white p-4 flex items-center shadow-md\">\r\n      <v-icon @click=\"goBack\">mdi-arrow-left</v-icon>\r\n      <h1 class=\"text-lg font-semibold flex-grow text-center\">ÂøÖË¶Å-ËÆ∏ÊÑøÁÆ°ÂÆ∂ ü•£Libra</h1>\r\n      <v-icon>mdi-dots-vertical</v-icon>\r\n    </header>\r\n\r\n    <main class=\"flex-grow overflow-y-auto p-4\">\r\n      <div v-for=\"(message, index) in messages\" :key=\"index\" class=\"mb-4\">\r\n        <div v-if=\"showTimestamp(index)\" class=\"text-xs text-gray-500 text-center mb-2\">\r\n          {{ formatTimestamp(message.timestamp) }}\r\n        </div>\r\n        <div :class=\"['flex', message.type === 'user' ? 'justify-end' : 'justify-start']\">\r\n          <div :class=\"['max-w-3/4 p-3 rounded-lg shadow', \r\n            message.type === 'user' ? 'bg-blue-500 text-white' : 'bg-white text-gray-800']\">\r\n            <div v-html=\"formatMessage(message.content)\"></div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div v-if=\"isAiThinking\" class=\"flex justify-start mb-4\">\r\n        <div class=\"bg-white text-gray-800 p-3 rounded-lg shadow\">\r\n          <div class=\"flex items-center\">\r\n            <span class=\"mr-2\">AIÊ≠£Âú®ÊÄùËÄÉ</span>\r\n            <div class=\"loading-dots\">\r\n              <span></span>\r\n              <span></span>\r\n              <span></span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </main>\r\n\r\n    <footer class=\"bg-white p-4 shadow-md\">\r\n      <div class=\"max-w-3xl mx-auto flex items-center\">\r\n        <input\r\n          v-model=\"userInput\"\r\n          type=\"text\"\r\n          placeholder=\"ËØ∑ËæìÂÖ•ÊÇ®ÁöÑÊ∂àÊÅØ...\"\r\n          class=\"flex-grow p-2 border rounded-l-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n          @keyup.enter=\"sendMessage\"\r\n          :disabled=\"isAiThinking\"\r\n        />\r\n        <button\r\n          @click=\"sendMessage\"\r\n          class=\"bg-blue-500 text-white p-2 rounded-r-lg hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n          :disabled=\"isAiThinking\"\r\n        >\r\n          ÂèëÈÄÅ\r\n        </button>\r\n      </div>\r\n    </footer>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\n\r\nexport default {\r\n  name: 'ChatWindow',\r\n  data() {\r\n    return {\r\n      messages: [],\r\n      userInput: '',\r\n      isAiThinking: false\r\n    }\r\n  },\r\n  methods: {\r\n    async sendMessage() {\r\n      if (this.userInput.trim() === '' || this.isAiThinking) return\r\n\r\n      const timestamp = new Date()\r\n      this.messages.push({ type: 'user', content: this.userInput, timestamp })\r\n      this.isAiThinking = true\r\n      const userInput = this.userInput\r\n      this.userInput = ''\r\n\r\n      try {\r\n        const response = await axios.post('http://localhost:5000/chat', { message: userInput })\r\n        this.messages.push({ type: 'ai', content: response.data.reply, timestamp: new Date() })\r\n      } catch (error) {\r\n        console.error('Error:', error)\r\n        this.messages.push({ type: 'error', content: 'Êä±Ê≠â,Âá∫Áé∞‰∫Ü‰∏Ä‰∏™ÈîôËØØ„ÄÇ', timestamp: new Date() })\r\n      } finally {\r\n        this.isAiThinking = false\r\n      }\r\n    },\r\n    goBack() {\r\n      // ÂÆûÁé∞ËøîÂõûÈÄªËæë\r\n    },\r\n    showTimestamp(index) {\r\n      if (index === 0) return true\r\n      const prevMessage = this.messages[index - 1]\r\n      const currentMessage = this.messages[index]\r\n      return new Date(currentMessage.timestamp) - new Date(prevMessage.timestamp) > 300000 // 5ÂàÜÈíü\r\n    },\r\n    formatTimestamp(timestamp) {\r\n      const date = new Date(timestamp)\r\n      return `${date.getMonth() + 1}Êúà${date.getDate()}Êó• ${date.getHours().toString().padStart(2, '0')}:${date.getMinutes().toString().padStart(2, '0')}`\r\n    },\r\n    formatMessage(content) {\r\n      return content.replace(/\\n/g, '<br>')\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.chat-window {\r\n  max-width: 768px;\r\n  margin: 0 auto;\r\n  height: 100vh;\r\n}\r\n\r\n.loading-dots span {\r\n  display: inline-block;\r\n  width: 8px;\r\n  height: 8px;\r\n  border-radius: 50%;\r\n  background-color: #888;\r\n  margin: 0 2px;\r\n  animation: loading 1.4s infinite ease-in-out both;\r\n}\r\n\r\n.loading-dots span:nth-child(1) {\r\n  animation-delay: -0.32s;\r\n}\r\n\r\n.loading-dots span:nth-child(2) {\r\n  animation-delay: -0.16s;\r\n}\r\n\r\n@keyframes loading {\r\n  0%, 80%, 100% { \r\n    transform: scale(0);\r\n  } 40% { \r\n    transform: scale(1.0);\r\n  }\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}