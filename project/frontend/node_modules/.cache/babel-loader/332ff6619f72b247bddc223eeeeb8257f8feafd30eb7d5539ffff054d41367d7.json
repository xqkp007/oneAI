{"ast":null,"code":"import { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createCommentVNode as _createCommentVNode, normalizeClass as _normalizeClass, vModelText as _vModelText, withKeys as _withKeys, withDirectives as _withDirectives } from \"vue\";\nvar _hoisted_1 = {\n  \"class\": \"chat-window flex flex-col h-screen bg-gray-100\"\n};\nvar _hoisted_2 = {\n  \"class\": \"flex-grow overflow-y-auto p-4\"\n};\nvar _hoisted_3 = {\n  key: 0,\n  \"class\": \"text-xs text-gray-500 text-center mb-2\"\n};\nvar _hoisted_4 = {\n  key: 0,\n  \"class\": \"w-10 h-10 rounded-full bg-gray-300 mr-2 flex-shrink-0\"\n};\nvar _hoisted_5 = [\"innerHTML\"];\nvar _hoisted_6 = {\n  key: 1,\n  \"class\": \"w-10 h-10 rounded-full bg-gray-300 ml-2 flex-shrink-0\"\n};\nvar _hoisted_7 = {\n  \"class\": \"bg-white p-4 shadow-md\"\n};\nvar _hoisted_8 = {\n  \"class\": \"max-w-3xl mx-auto flex items-center\"\n};\nvar _hoisted_9 = [\"disabled\"];\nvar _hoisted_10 = [\"disabled\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[3] || (_cache[3] = _createElementVNode(\"header\", {\n    \"class\": \"bg-white p-4 flex items-center shadow-md\"\n  }, [_createElementVNode(\"h1\", {\n    \"class\": \"text-lg font-semibold flex-grow text-center\"\n  }, \"ÂøÖË¶Å-ËÆ∏ÊÑøÁÆ°ÂÆ∂ ü•£Libra\")], -1 /* HOISTED */)), _createElementVNode(\"main\", _hoisted_2, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.messages, function (message, index) {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: index,\n      \"class\": \"mb-4\"\n    }, [$options.showTimestamp(index) ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, _toDisplayString($options.formatTimestamp(message.timestamp)), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"div\", {\n      \"class\": _normalizeClass(['flex', message.type === 'user' ? 'justify-end' : 'justify-start'])\n    }, [message.type !== 'user' ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4)) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"div\", {\n      \"class\": _normalizeClass(['max-w-3/4 p-3 rounded-lg shadow', message.type === 'user' ? 'bg-blue-500 text-white' : 'bg-white text-gray-800'])\n    }, [_createElementVNode(\"div\", {\n      innerHTML: $options.formatMessage(message.content)\n    }, null, 8 /* PROPS */, _hoisted_5)], 2 /* CLASS */), message.type === 'user' ? (_openBlock(), _createElementBlock(\"div\", _hoisted_6)) : _createCommentVNode(\"v-if\", true)], 2 /* CLASS */)]);\n  }), 128 /* KEYED_FRAGMENT */))]), _createElementVNode(\"footer\", _hoisted_7, [_createElementVNode(\"div\", _hoisted_8, [_withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = function ($event) {\n      return $data.userInput = $event;\n    }),\n    type: \"text\",\n    placeholder: \"ËØ∑ËæìÂÖ•ÊÇ®ÁöÑÊ∂àÊÅØ...\",\n    \"class\": \"flex-grow p-2 border rounded-l-lg focus:outline-none focus:ring-2 focus:ring-blue-500\",\n    onKeyup: _cache[1] || (_cache[1] = _withKeys(function () {\n      return $options.sendMessage && $options.sendMessage.apply($options, arguments);\n    }, [\"enter\"])),\n    disabled: $data.isAiThinking\n  }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_9), [[_vModelText, $data.userInput]]), _createElementVNode(\"button\", {\n    onClick: _cache[2] || (_cache[2] = function () {\n      return $options.sendMessage && $options.sendMessage.apply($options, arguments);\n    }),\n    \"class\": \"bg-blue-500 text-white p-2 rounded-r-lg hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500\",\n    disabled: $data.isAiThinking\n  }, \" ÂèëÈÄÅ \", 8 /* PROPS */, _hoisted_10)])])]);\n}","map":{"version":3,"names":["key","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_Fragment","_renderList","$data","messages","message","index","$options","showTimestamp","_hoisted_3","_toDisplayString","formatTimestamp","timestamp","_createCommentVNode","_normalizeClass","type","_hoisted_4","innerHTML","formatMessage","content","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_cache","$event","userInput","placeholder","onKeyup","_withKeys","sendMessage","apply","arguments","disabled","isAiThinking","_hoisted_9","onClick","_hoisted_10"],"sources":["C:\\Users\\PC\\Desktop\\zidonghua\\project\\frontend\\src\\components\\ChatWindow.vue"],"sourcesContent":["<template>\r\n  <div class=\"chat-window flex flex-col h-screen bg-gray-100\">\r\n    <header class=\"bg-white p-4 flex items-center shadow-md\">\r\n      <h1 class=\"text-lg font-semibold flex-grow text-center\">ÂøÖË¶Å-ËÆ∏ÊÑøÁÆ°ÂÆ∂ ü•£Libra</h1>\r\n    </header>\r\n\r\n    <main class=\"flex-grow overflow-y-auto p-4\">\r\n      <div v-for=\"(message, index) in messages\" :key=\"index\" class=\"mb-4\">\r\n        <div v-if=\"showTimestamp(index)\" class=\"text-xs text-gray-500 text-center mb-2\">\r\n          {{ formatTimestamp(message.timestamp) }}\r\n        </div>\r\n        <div :class=\"['flex', message.type === 'user' ? 'justify-end' : 'justify-start']\">\r\n          <div v-if=\"message.type !== 'user'\" class=\"w-10 h-10 rounded-full bg-gray-300 mr-2 flex-shrink-0\"></div>\r\n          <div :class=\"['max-w-3/4 p-3 rounded-lg shadow', \r\n            message.type === 'user' ? 'bg-blue-500 text-white' : 'bg-white text-gray-800']\">\r\n            <div v-html=\"formatMessage(message.content)\"></div>\r\n          </div>\r\n          <div v-if=\"message.type === 'user'\" class=\"w-10 h-10 rounded-full bg-gray-300 ml-2 flex-shrink-0\"></div>\r\n        </div>\r\n      </div>\r\n    </main>\r\n\r\n    <footer class=\"bg-white p-4 shadow-md\">\r\n      <div class=\"max-w-3xl mx-auto flex items-center\">\r\n        <input\r\n          v-model=\"userInput\"\r\n          type=\"text\"\r\n          placeholder=\"ËØ∑ËæìÂÖ•ÊÇ®ÁöÑÊ∂àÊÅØ...\"\r\n          class=\"flex-grow p-2 border rounded-l-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n          @keyup.enter=\"sendMessage\"\r\n          :disabled=\"isAiThinking\"\r\n        />\r\n        <button\r\n          @click=\"sendMessage\"\r\n          class=\"bg-blue-500 text-white p-2 rounded-r-lg hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n          :disabled=\"isAiThinking\"\r\n        >\r\n          ÂèëÈÄÅ\r\n        </button>\r\n      </div>\r\n    </footer>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\n\r\nexport default {\r\n  name: 'ChatWindow',\r\n  data() {\r\n    return {\r\n      messages: [],\r\n      userInput: '',\r\n      isAiThinking: false\r\n    }\r\n  },\r\n  methods: {\r\n    async sendMessage() {\r\n      if (this.userInput.trim() === '' || this.isAiThinking) return\r\n\r\n      const timestamp = new Date()\r\n      this.messages.push({ type: 'user', content: this.userInput, timestamp })\r\n      this.isAiThinking = true\r\n      const userInput = this.userInput\r\n      this.userInput = ''\r\n\r\n      try {\r\n        const response = await axios.post('http://localhost:5000/chat', { message: userInput })\r\n        this.messages.push({ type: 'ai', content: response.data.reply, timestamp: new Date() })\r\n      } catch (error) {\r\n        console.error('Error:', error)\r\n        this.messages.push({ type: 'error', content: 'Êä±Ê≠â,Âá∫Áé∞‰∫Ü‰∏Ä‰∏™ÈîôËØØ„ÄÇ', timestamp: new Date() })\r\n      } finally {\r\n        this.isAiThinking = false\r\n      }\r\n    },\r\n    goBack() {\r\n      // ÂÆûÁé∞ËøîÂõûÈÄªËæë\r\n    },\r\n    showTimestamp(index) {\r\n      if (index === 0) return true\r\n      const prevMessage = this.messages[index - 1]\r\n      const currentMessage = this.messages[index]\r\n      return new Date(currentMessage.timestamp) - new Date(prevMessage.timestamp) > 300000 // 5ÂàÜÈíü\r\n    },\r\n    formatTimestamp(timestamp) {\r\n      const date = new Date(timestamp)\r\n      return `${date.getMonth() + 1}Êúà${date.getDate()}Êó• ${date.getHours().toString().padStart(2, '0')}:${date.getMinutes().toString().padStart(2, '0')}`\r\n    },\r\n    formatMessage(content) {\r\n      return content.replace(/\\n/g, '<br>')\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.chat-window {\r\n  width: 750px;\r\n  height: 1334px;\r\n  margin: 0 auto;\r\n}\r\n\r\n.loading-dots span {\r\n  display: inline-block;\r\n  width: 8px;\r\n  height: 8px;\r\n  border-radius: 50%;\r\n  background-color: #888;\r\n  margin: 0 2px;\r\n  animation: loading 1.4s infinite ease-in-out both;\r\n}\r\n\r\n.loading-dots span:nth-child(1) {\r\n  animation-delay: -0.32s;\r\n}\r\n\r\n.loading-dots span:nth-child(2) {\r\n  animation-delay: -0.16s;\r\n}\r\n\r\n@keyframes loading {\r\n  0%, 80%, 100% { \r\n    transform: scale(0);\r\n  } 40% { \r\n    transform: scale(1.0);\r\n  }\r\n}\r\n</style>\r\n"],"mappings":";;EACO,SAAM;AAAgD;;EAKnD,SAAM;AAA+B;;EAN/CA,GAAA;EAQyC,SAAM;;;EAR/CA,GAAA;EAY8C,SAAM;;iBAZpD;;EAAAA,GAAA;EAiB8C,SAAM;;;EAKxC,SAAM;AAAwB;;EAC/B,SAAM;AAAqC;iBAvBtD;kBAAA;;uBACEC,mBAAA,CAwCM,OAxCNC,UAwCM,G,0BAvCJC,mBAAA,CAES;IAFD,SAAM;EAA0C,IACtDA,mBAAA,CAA4E;IAAxE,SAAM;EAA6C,GAAC,iBAAe,E,sBAGzEA,mBAAA,CAcO,QAdPC,UAcO,I,kBAbLH,mBAAA,CAYMI,SAAA,QAnBZC,WAAA,CAOsCC,KAAA,CAAAC,QAAQ,EAP9C,UAOmBC,OAAO,EAAEC,KAAK;yBAA3BT,mBAAA,CAYM;MAZqCD,GAAG,EAAEU,KAAK;MAAE,SAAM;QAChDC,QAAA,CAAAC,aAAa,CAACF,KAAK,K,cAA9BT,mBAAA,CAEM,OAFNY,UAEM,EAAAC,gBAAA,CADDH,QAAA,CAAAI,eAAe,CAACN,OAAO,CAACO,SAAS,qBAT9CC,mBAAA,gBAWQd,mBAAA,CAOM;MAPA,SAXde,eAAA,UAW8BT,OAAO,CAACU,IAAI;QACrBV,OAAO,CAACU,IAAI,e,cAAvBlB,mBAAA,CAAwG,OAAxGmB,UAAwG,KAZlHH,mBAAA,gBAaUd,mBAAA,CAGM;MAHA,SAbhBe,eAAA,qCAayET,OAAO,CAACU,IAAI;QAEzEhB,mBAAA,CAAmD;MAA9CkB,SAAuC,EAA/BV,QAAA,CAAAW,aAAa,CAACb,OAAO,CAACc,OAAO;4BAftDC,UAAA,E,kBAiBqBf,OAAO,CAACU,IAAI,e,cAAvBlB,mBAAA,CAAwG,OAAxGwB,UAAwG,KAjBlHR,mBAAA,e;oCAsBId,mBAAA,CAkBS,UAlBTuB,UAkBS,GAjBPvB,mBAAA,CAgBM,OAhBNwB,UAgBM,G,gBAfJxB,mBAAA,CAOE;IA/BV,uBAAAyB,MAAA,QAAAA,MAAA,gBAAAC,MAAA;MAAA,OAyBmBtB,KAAA,CAAAuB,SAAS,GAAAD,MAAA;IAAA;IAClBV,IAAI,EAAC,MAAM;IACXY,WAAW,EAAC,YAAY;IACxB,SAAM,uFAAuF;IAC5FC,OAAK,EAAAJ,MAAA,QAAAA,MAAA,MA7BhBK,SAAA;MAAA,OA6BwBtB,QAAA,CAAAuB,WAAA,IAAAvB,QAAA,CAAAuB,WAAA,CAAAC,KAAA,CAAAxB,QAAA,EAAAyB,SAAA,CAAW;IAAA;IACxBC,QAAQ,EAAE9B,KAAA,CAAA+B;2CA9BrBC,UAAA,I,cAyBmBhC,KAAA,CAAAuB,SAAS,E,GAOpB3B,mBAAA,CAMS;IALNqC,OAAK,EAAAZ,MAAA,QAAAA,MAAA;MAAA,OAAEjB,QAAA,CAAAuB,WAAA,IAAAvB,QAAA,CAAAuB,WAAA,CAAAC,KAAA,CAAAxB,QAAA,EAAAyB,SAAA,CAAW;IAAA;IACnB,SAAM,+GAA+G;IACpHC,QAAQ,EAAE9B,KAAA,CAAA+B;KACZ,MAED,iBAtCRG,WAAA,E","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}